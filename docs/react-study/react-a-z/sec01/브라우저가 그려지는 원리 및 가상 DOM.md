---
sidebar_position: 4
---

## 브라우저가 그려지는 원리 및 가상 DOM

- **리액트의 주요 특징** : 가상 DOM을 사용하는 것

### 웹 페이지 빌드 과정 (Critical Rendering Path; CRP)

- 브라우저가 서버에서 페이지에 대한 HTML 응답을 받고 화면에 표시하기 전까지의 여러 단계

1. **DOM tree 생성** : 렌더 엔진이 문서를 읽어들여서 그것들을 파싱하고 어떤 내용을 페이지에 렌더링할 지 결정 (**_화면에 표시되는 모든 노드의 콘텐츠 및 스타일 정보를 포함함_**)
2. **Render tree 생성** : 브라우저가 DOM과 CSSOM을 결합하는 곳. 화면에 보이는 모든 콘텐츠와 스타일 정보를 모두 포함하는 최종 렌더링 트리 출력
3. **Layout (reflow)** : 브라우저가 페이지에 표시되는 각 요소의 크기와 위치를 계산하는 단계
4. **Paint** : 실제 화면에 그림

- **문제점** : 어떤 인터렉션에 의해 DOM에 변화가 발생하면 그 때 마다 Render tree가 재생성 됨
  - 인터렉션이 적은 웹이면 괜찮지만 인터렉션이 많으면 작은 변화로 인해 위 과정을 계속 거치게 되니 불필요하게 DOM을 조작하는 비용이 너무 크게 됨

### 가상 DOM (Virtual DOM)

- **가상 DOM** : 실제 DOM을 메모리에 복사해준 것
- **가상 DOM의 작동 방식**
  1. 데이터가 바뀌면 가상 DOM이 렌더링됨
  2. 이전에 생긴 가상 DOM과 비교하여 바뀐 부분만 실제 DOM에 적용함
  - **Diffing** : 이전에 생긴 가상 DOM과 비교하여 바뀐 부분을 찾는 과정
  - **재조정(reconciliation)** : 바뀐 부분만 실제 DOM에 적용시켜주는 것
- 가상 DOM 덕분에 만약 요소가 30개 변하였다고 하더라도 한 번에 묶어서 한 번의 실제 DOM 수정으로 처리하기 때문에 DOM을 조작하는 비용을 줄이게 됨
